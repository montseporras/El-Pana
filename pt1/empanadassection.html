<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empanadas</title>

    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

<div id="header-container"></div>

<div id="status-bar" class="status-bar hidden">
    <span>En este momento estamos cerrados....</span>
    <button id="open-schedule">Ver horarios</button>
</div>

<main class="product__page">

    <div class="section-titlearepa">
        <button class="back-button" onclick="history.back()">←</button>
        <h1>Empanadas</h1>
    </div>

    <div class="product-list">

        <div class="product-row" data-id="empanada-pollo">
            <img src="fotos\empanada carne 1.png" alt="Empanada-pollo">
            <div class="product-info">
                <h3>EMPANADA DE POLLO</h3>
                <div class="price">
                    <span class="price-current">$3.200</span>
                    <span class="price-old">$4.000</span>
                </div>
                <span class="discount">20% OFF</span>
            </div>
        </div>

        <div class="product-row" data-id="empanada-carne">
            <img src="fotos\empanada carne 1.png" alt="Empanada-carne">
            <div class="product-info">
                <h3>EMPANADA DE CARNE</h3>
                <div class="price">
                    <span class="price-current">$3.500</span>
                </div>
                <span class="discount">10% OFF</span>
            </div>
        </div>

    </div>
</main>

<dialog id="schedule-modal">
    <div class="modal__content">
        <h2 class="modal__title">Horarios</h2>
        <p>Lunes a Viernes: 11:00 – 23:00</p>
        <p>Sábados y Domingos: 12:00 – 00:00</p>
        <button class="modal__close-button">✕</button>
    </div>
</dialog>

<!-- ORDEN CORRECTO -->
<script src="products-data.js"></script>
<script src="script.js"></script>

</body>
</html>

<script>
/* ===== HORARIOS ===== */
(function () {
    const statusBar = document.getElementById("status-bar");
    if (!statusBar) return;

    function isOpenNow() {
        const now = new Date();
        const day = now.getDay();

        let openHour = (day >= 1 && day <= 5) ? 11 : 12;
        let closeHour = (day >= 1 && day <= 5) ? 23 : 24;

        const openTime = new Date(now);
        openTime.setHours(openHour, 0, 0, 0);

        const closeTime = new Date(now);
        closeTime.setHours(closeHour, 0, 0, 0);

        return now >= openTime && now < closeTime;
    }

    if (!isOpenNow()) {
        statusBar.classList.remove("hidden");
    }

    document.getElementById("open-schedule")?.addEventListener("click", e => {
        e.preventDefault();
        document.getElementById("schedule-modal").showModal();
    });
})();
</script>

<script>
/* ===== BUSCADOR UNIVERSAL ===== */
const params = new URLSearchParams(window.location.search);
const searchValue = params.get("search");

if (searchValue) {
    const products = document.querySelectorAll(".product-row");
    const value = searchValue.toLowerCase();

    products.forEach(product => {
        const text = product.textContent.toLowerCase();
        product.style.display = text.includes(value) ? "flex" : "none";
    });
}
</script>

</body>
</html>
